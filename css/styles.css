html, body, #map { height:100%; margin:0; }
.layer-menu {
  position:absolute; top:10px; right:10px;
  background:rgba(255,255,255,0.95); padding:12px 16px;
  border-radius:8px; z-index:1000; font-family:sans-serif;
  max-height:80vh; overflow-y:auto; box-shadow:0 2px 8px rgba(0,0,0,0.2);
  min-width:260px;
}
.layer-menu h4 { margin:8px 0 4px; font-size:1em; cursor:pointer; user-select:none; display:flex; align-items:center; }
.layer-menu label { display:block; margin:2px 0; font-size:0.95em; cursor:pointer; }
.layer-menu .group-controls { margin-bottom:8px; }
.layer-menu .divider { border-bottom:1px solid #ccc; margin:8px 0; }
.layer-menu .search-box {
  width:100%; margin-bottom:8px; padding:2px 6px; font-size:0.95em;
  border:1px solid #ccc; border-radius:4px; box-sizing:border-box;
}
.collapse-arrow { display:inline-block; margin-right:6px; transition:transform .2s; font-size:1.1em; }
.collapsed .collapse-arrow { transform:rotate(-90deg); }
.collapsed + .collapsible-list { display:none; }
#activeHeader, #activeList { position:sticky; top:0; background:rgba(255,255,255,0.98); z-index:1010; }
#activeList { max-height:30vh; overflow-y:auto; }
.ses-unit-label {
  background:#fff; border:2px solid #cc7a00; border-radius:8px;
  padding:6px 14px; font-size:1em; font-weight:bold; color:#cc7a00;
  box-shadow:0 2px 8px rgba(255,153,0,0.15); position:relative;
}
.ses-unit-label:after {
  content:""; position:absolute; left:50%; bottom:-14px; transform:translateX(-50%);
  width:0; height:0; border-left:10px solid transparent; border-right:10px solid transparent;
  border-top:14px solid #cc7a00;
}
.leaflet-marker-icon.ses-unit-marker { background:transparent; border:none; }
.ambulance-emph { animation:amb-pulse 1.6s infinite; border-radius:50%; }
@keyframes amb-pulse {
  0% { box-shadow:0 0 0 0 rgba(211,47,47,0.55); }
  70% { box-shadow:0 0 0 14px rgba(211,47,47,0); }
  100% { box-shadow:0 0 0 0 rgba(211,47,47,0); }
}
.ambulance-name-label {
  background:#fff; border:2px solid #d32f2f; border-radius:6px;
  padding:2px 8px; font-weight:bold; color:#d32f2f; font-size:0.95em;
  box-shadow:0 1px 4px rgba(0,0,0,0.15); white-space:nowrap;
}